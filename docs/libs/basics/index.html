<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title> basics  - Faust Libraries</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../.."><img src="../../img/faustText.svg" width="150px"> Libraries</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../organization/" class="dropdown-item"> Organization </a>
</li>
                                    
<li>
    <a href="../../standardFunctions/" class="dropdown-item"> Standard Functions </a>
</li>
                                    
<li>
    <a href="../../contributing/" class="dropdown-item"> Contributing </a>
</li>
                                    
<li>
    <a href="../../copyright/" class="dropdown-item"> Copyright/License </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../" class="nav-link">Index</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../analyzers/" class="dropdown-item"> analyzers </a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active"> basics </a>
</li>
                                    
<li>
    <a href="../compressors/" class="dropdown-item"> compressors </a>
</li>
                                    
<li>
    <a href="../delays/" class="dropdown-item"> delays </a>
</li>
                                    
<li>
    <a href="../demos/" class="dropdown-item"> demos </a>
</li>
                                    
<li>
    <a href="../dx7/" class="dropdown-item"> dx7 </a>
</li>
                                    
<li>
    <a href="../envelopes/" class="dropdown-item"> envelopes </a>
</li>
                                    
<li>
    <a href="../filters/" class="dropdown-item"> filters </a>
</li>
                                    
<li>
    <a href="../hoa/" class="dropdown-item"> hoa </a>
</li>
                                    
<li>
    <a href="../interpolators/" class="dropdown-item"> interpolators </a>
</li>
                                    
<li>
    <a href="../maths/" class="dropdown-item"> maths </a>
</li>
                                    
<li>
    <a href="../mi/" class="dropdown-item"> mi </a>
</li>
                                    
<li>
    <a href="../misceffects/" class="dropdown-item"> misceffects </a>
</li>
                                    
<li>
    <a href="../oscillators/" class="dropdown-item"> oscillators </a>
</li>
                                    
<li>
    <a href="../noises/" class="dropdown-item"> noises </a>
</li>
                                    
<li>
    <a href="../phaflangers/" class="dropdown-item"> phaflangers </a>
</li>
                                    
<li>
    <a href="../physmodels/" class="dropdown-item"> physmodels </a>
</li>
                                    
<li>
    <a href="../quantizer/" class="dropdown-item"> quantizer </a>
</li>
                                    
<li>
    <a href="../reducemaps/" class="dropdown-item"> reducemaps </a>
</li>
                                    
<li>
    <a href="../reverbs/" class="dropdown-item"> reverbs </a>
</li>
                                    
<li>
    <a href="../routes/" class="dropdown-item"> routes </a>
</li>
                                    
<li>
    <a href="../signals/" class="dropdown-item"> signals </a>
</li>
                                    
<li>
    <a href="../soundfiles/" class="dropdown-item"> soundfiles </a>
</li>
                                    
<li>
    <a href="../spats/" class="dropdown-item"> spats </a>
</li>
                                    
<li>
    <a href="../synths/" class="dropdown-item"> synths </a>
</li>
                                    
<li>
    <a href="../vaeffects/" class="dropdown-item"> vaeffects </a>
</li>
                                    
<li>
    <a href="../webaudio/" class="dropdown-item"> webaudio </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        

        <div class="container">
            <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#basicslib" class="nav-link">basics.lib</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#conversion-tools" class="nav-link">Conversion Tools</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#basamp2sec" class="nav-link">(ba.)samp2sec</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#basec2samp" class="nav-link">(ba.)sec2samp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#badb2linear" class="nav-link">(ba.)db2linear</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#balinear2db" class="nav-link">(ba.)linear2db</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#balin2loggain" class="nav-link">(ba.)lin2LogGain</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#balog2lingain" class="nav-link">(ba.)log2LinGain</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#batau2pole" class="nav-link">(ba.)tau2pole</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapole2tau" class="nav-link">(ba.)pole2tau</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bamidikey2hz" class="nav-link">(ba.)midikey2hz</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bahz2midikey" class="nav-link">(ba.)hz2midikey</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#basemi2ratio" class="nav-link">(ba.)semi2ratio</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baratio2semi" class="nav-link">(ba.)ratio2semi</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapianokey2hz" class="nav-link">(ba.)pianokey2hz</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bahz2pianokey" class="nav-link">(ba.)hz2pianokey</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#counters-and-timetempo-tools" class="nav-link">Counters and Time/Tempo Tools</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#bacountdown" class="nav-link">(ba.)countdown</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bacountup" class="nav-link">(ba.)countup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#basweep" class="nav-link">(ba.)sweep</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#batime" class="nav-link">(ba.)time</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baramp" class="nav-link">(ba.)ramp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#batempo" class="nav-link">(ba.)tempo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baperiod" class="nav-link">(ba.)period</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulse" class="nav-link">(ba.)pulse</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulsen" class="nav-link">(ba.)pulsen</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bacycle" class="nav-link">(ba.)cycle</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babeat" class="nav-link">(ba.)beat</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulse_countup" class="nav-link">(ba.)pulse_countup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulse_countdown" class="nav-link">(ba.)pulse_countdown</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulse_countup_loop" class="nav-link">(ba.)pulse_countup_loop</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baresetctr" class="nav-link">(ba.)resetCtr</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapulse_countdown_loop" class="nav-link">(ba.)pulse_countdown_loop</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#array-processingpattern-matching" class="nav-link">Array Processing/Pattern Matching</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#bacount" class="nav-link">(ba.)count</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#batake" class="nav-link">(ba.)take</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#basubseq" class="nav-link">(ba.)subseq</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#selectors-conditions" class="nav-link">Selectors (Conditions)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#baif" class="nav-link">(ba.)if</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baselector" class="nav-link">(ba.)selector</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baselect2stereo" class="nav-link">(ba.)select2stereo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baselectn" class="nav-link">(ba.)selectn</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baselectmulti" class="nav-link">(ba.)selectmulti</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#other" class="nav-link">Other</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#balatch" class="nav-link">(ba.)latch</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#basandh" class="nav-link">(ba.)sAndH</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#badownsample" class="nav-link">(ba.)downSample</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapeakhold" class="nav-link">(ba.)peakhold</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#bapeakholder" class="nav-link">(ba.)peakholder</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baimpulsify" class="nav-link">(ba.)impulsify</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baautomat" class="nav-link">(ba.)automat</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babpf" class="nav-link">(ba.)bpf</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#balistinterp" class="nav-link">(ba.)listInterp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babypass1" class="nav-link">(ba.)bypass1</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babypass2" class="nav-link">(ba.)bypass2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babypass1to2" class="nav-link">(ba.)bypass1to2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#babypass_fade" class="nav-link">(ba.)bypass_fade</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#batoggle" class="nav-link">(ba.)toggle</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baon_and_off" class="nav-link">(ba.)on_and_off</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baselectoutn" class="nav-link">(ba.)selectoutn</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sliding-reduce" class="nav-link">Sliding Reduce</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#baslidingreduce" class="nav-link">(ba.)slidingReduce</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingsum" class="nav-link">(ba.)slidingSum</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingsump" class="nav-link">(ba.)slidingSump</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingmax" class="nav-link">(ba.)slidingMax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingmin" class="nav-link">(ba.)slidingMin</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingmean" class="nav-link">(ba.)slidingMean</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingmeanp" class="nav-link">(ba.)slidingMeanp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingrms" class="nav-link">(ba.)slidingRMS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baslidingrmsp" class="nav-link">(ba.)slidingRMSp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#parallel-operator" class="nav-link">Parallel Operator</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#baparallelop" class="nav-link">(ba.)parallelOp</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baparallelmax" class="nav-link">(ba.)parallelMax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baparallelmin" class="nav-link">(ba.)parallelMin</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baparallelmean" class="nav-link">(ba.)parallelMean</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#baparallelrms" class="nav-link">(ba.)parallelRMS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9 main-container" role="main">

<h1 id="basicslib">basics.lib</h1>
<p>A library of basic elements. Its official prefix is <code>ba</code>.</p>
<h2 id="conversion-tools">Conversion Tools</h2>
<hr />
<h3 id="basamp2sec"><code>(ba.)samp2sec</code></h3>
<p>Converts a number of samples to a duration in seconds.
<code>samp2sec</code> is a standard Faust function.</p>
<h4 id="usage">Usage</h4>
<pre><code>samp2sec(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: number of samples</li>
</ul>
<hr />
<h3 id="basec2samp"><code>(ba.)sec2samp</code></h3>
<p>Converts a duration in seconds to a number of samples.
<code>samp2sec</code> is a standard Faust function.</p>
<h4 id="usage_1">Usage</h4>
<pre><code>sec2samp(d) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>d</code>: duration in seconds</li>
</ul>
<hr />
<h3 id="badb2linear"><code>(ba.)db2linear</code></h3>
<p>Converts a loudness in dB to a linear gain (0-1).
<code>db2linear</code> is a standard Faust function.</p>
<h4 id="usage_2">Usage</h4>
<pre><code>db2linear(l) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>l</code>: loudness in dB</li>
</ul>
<hr />
<h3 id="balinear2db"><code>(ba.)linear2db</code></h3>
<p>Converts a linear gain (0-1) to a loudness in dB.
<code>linear2db</code> is a standard Faust function.</p>
<h4 id="usage_3">Usage</h4>
<pre><code>linear2db(g) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>g</code>: a linear gain</li>
</ul>
<hr />
<h3 id="balin2loggain"><code>(ba.)lin2LogGain</code></h3>
<p>Converts a linear gain (0-1) to a log gain (0-1).</p>
<h4 id="usage_4">Usage</h4>
<pre><code>lin2LogGain(n) : _
</code></pre>

<hr />
<h3 id="balog2lingain"><code>(ba.)log2LinGain</code></h3>
<p>Converts a log gain (0-1) to a linear gain (0-1).</p>
<h4 id="usage_5">Usage</h4>
<pre><code>log2LinGain(n) : _
</code></pre>

<hr />
<h3 id="batau2pole"><code>(ba.)tau2pole</code></h3>
<p>Returns a real pole giving exponential decay.
Note that t60 (time to decay 60 dB) is ~6.91 time constants.
<code>tau2pole</code> is a standard Faust function.</p>
<h4 id="usage_6">Usage</h4>
<pre><code>_ : smooth(tau2pole(tau)) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>tau</code>: time-constant in seconds</li>
</ul>
<hr />
<h3 id="bapole2tau"><code>(ba.)pole2tau</code></h3>
<p>Returns the time-constant, in seconds, corresponding to the given real,
positive pole in (0,1).
<code>pole2tau</code> is a standard Faust function.</p>
<h4 id="usage_7">Usage</h4>
<pre><code>pole2tau(pole) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>pole</code>: the pole</li>
</ul>
<hr />
<h3 id="bamidikey2hz"><code>(ba.)midikey2hz</code></h3>
<p>Converts a MIDI key number to a frequency in Hz (MIDI key 69 = A440).
<code>midikey2hz</code> is a standard Faust function.</p>
<h4 id="usage_8">Usage</h4>
<pre><code>midikey2hz(mk) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>mk</code>: the MIDI key number</li>
</ul>
<hr />
<h3 id="bahz2midikey"><code>(ba.)hz2midikey</code></h3>
<p>Converts a frequency in Hz to a MIDI key number (MIDI key 69 = A440).
<code>hz2midikey</code> is a standard Faust function.</p>
<h4 id="usage_9">Usage</h4>
<pre><code>hz2midikey(f) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>f</code>: frequency in Hz</li>
</ul>
<hr />
<h3 id="basemi2ratio"><code>(ba.)semi2ratio</code></h3>
<p>Converts semitones in a frequency multiplicative ratio.
<code>semi2ratio</code> is a standard Faust function.</p>
<h4 id="usage_10">Usage</h4>
<pre><code>semi2ratio(semi) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>semi</code>: number of semitone </li>
</ul>
<hr />
<h3 id="baratio2semi"><code>(ba.)ratio2semi</code></h3>
<p>Converts a frequency multiplicative ratio in semitones.
<code>ratio2semi</code> is a standard Faust function.</p>
<h4 id="usage_11">Usage</h4>
<pre><code>ratio2semi(ratio) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>ratio</code>: frequency multiplicative ratio</li>
</ul>
<hr />
<h3 id="bapianokey2hz"><code>(ba.)pianokey2hz</code></h3>
<p>Converts a piano key number to a frequency in Hz (piano key 49 = A440).</p>
<h4 id="usage_12">Usage</h4>
<pre><code>pianokey2hz(pk) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>pk</code>: the piano key number</li>
</ul>
<hr />
<h3 id="bahz2pianokey"><code>(ba.)hz2pianokey</code></h3>
<p>Converts a frequency in Hz to a piano key number (piano key 49 = A440).</p>
<h4 id="usage_13">Usage</h4>
<pre><code>hz2pianokey(f) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>f</code>: frequency in Hz</li>
</ul>
<h2 id="counters-and-timetempo-tools">Counters and Time/Tempo Tools</h2>
<hr />
<h3 id="bacountdown"><code>(ba.)countdown</code></h3>
<p>Starts counting down from n included to 0. While trig is 1 the output is n.
The countdown starts with the transition of trig from 1 to 0. At the end
of the countdown the output value will remain at 0 until the next trig.
<code>countdown</code> is a standard Faust function.</p>
<h4 id="usage_14">Usage</h4>
<pre><code>countdown(n,trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the starting point of the countdown</li>
<li><code>trig</code>: the trigger signal (1: start at <code>n</code>; 0: decrease until 0)</li>
</ul>
<hr />
<h3 id="bacountup"><code>(ba.)countup</code></h3>
<p>Starts counting up from 0 to n included. While trig is 1 the output is 0.
The countup starts with the transition of trig from 1 to 0. At the end
of the countup the output value will remain at n until the next trig.
<code>countup</code> is a standard Faust function.</p>
<h4 id="usage_15">Usage</h4>
<pre><code>countup(n,trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the maximum count value</li>
<li><code>trig</code>: the trigger signal (1: start at 0; 0: increase until <code>n</code>)</li>
</ul>
<hr />
<h3 id="basweep"><code>(ba.)sweep</code></h3>
<p>Counts from 0 to <code>period-1</code> repeatedly, generating a
sawtooth waveform, like os.lf_rawsaw,
starting at 1 when <code>run</code> transitions from 0 to 1.
Outputs zero while <code>run</code> is 0.</p>
<h4 id="usage_16">Usage</h4>
<pre><code>sweep(period,run) : _
</code></pre>

<hr />
<h3 id="batime"><code>(ba.)time</code></h3>
<p>A simple timer that counts every samples from the beginning of the process.
<code>time</code> is a standard Faust function.</p>
<h4 id="usage_17">Usage</h4>
<pre><code>time : _
</code></pre>

<hr />
<h3 id="baramp"><code>(ba.)ramp</code></h3>
<p>An linear ramp of 'n' samples to reach the next value</p>
<h4 id="usage_18">Usage</h4>
<pre><code>_ : ramp(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: number of samples to reach the next value</li>
</ul>
<hr />
<h3 id="batempo"><code>(ba.)tempo</code></h3>
<p>Converts a tempo in BPM into a number of samples.</p>
<h4 id="usage_19">Usage</h4>
<pre><code>tempo(t) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>t</code>: tempo in BPM</li>
</ul>
<hr />
<h3 id="baperiod"><code>(ba.)period</code></h3>
<p>Basic sawtooth wave of period <code>p</code>.</p>
<h4 id="usage_20">Usage</h4>
<pre><code>period(p) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>p</code>: period as a number of samples</li>
</ul>
<hr />
<h3 id="bapulse"><code>(ba.)pulse</code></h3>
<p>Pulses (10000) generated at period <code>p</code>.</p>
<h4 id="usage_21">Usage</h4>
<pre><code>pulse(p) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>p</code>: period as a number of samples</li>
</ul>
<hr />
<h3 id="bapulsen"><code>(ba.)pulsen</code></h3>
<p>Pulses (11110000) of length <code>n</code> generated at period <code>p</code>.</p>
<h4 id="usage_22">Usage</h4>
<pre><code>pulsen(n,p) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: pulse length as a number of samples</li>
<li><code>p</code>: period as a number of samples</li>
</ul>
<hr />
<h3 id="bacycle"><code>(ba.)cycle</code></h3>
<p>Split nonzero input values into <code>n</code> cycles.</p>
<h4 id="usage_23">Usage</h4>
<pre><code>_ : cycle(n) &lt;:
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the number of cycles/output signals</li>
</ul>
<hr />
<h3 id="babeat"><code>(ba.)beat</code></h3>
<p>Pulses at tempo <code>t</code>.
<code>beat</code> is a standard Faust function.</p>
<h4 id="usage_24">Usage</h4>
<pre><code>beat(t) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>t</code>: tempo in BPM</li>
</ul>
<hr />
<h3 id="bapulse_countup"><code>(ba.)pulse_countup</code></h3>
<p>Starts counting up pulses. While trig is 1 the output is
counting up, while trig is 0 the counter is reset to 0.</p>
<h4 id="usage_25">Usage</h4>
<pre><code>_ : pulse_countup(trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>trig</code>: the trigger signal (1: start at next pulse; 0: reset to 0)</li>
</ul>
<hr />
<h3 id="bapulse_countdown"><code>(ba.)pulse_countdown</code></h3>
<p>Starts counting down pulses. While trig is 1 the output is
counting down, while trig is 0 the counter is reset to 0.</p>
<h4 id="usage_26">Usage</h4>
<pre><code>_ : pulse_countdown(trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>trig</code>: the trigger signal (1: start at next pulse; 0: reset to 0)</li>
</ul>
<hr />
<h3 id="bapulse_countup_loop"><code>(ba.)pulse_countup_loop</code></h3>
<p>Starts counting up pulses from 0 to n included. While trig is 1 the output is
counting up, while trig is 0 the counter is reset to 0. At the end
of the countup (n) the output value will be reset to 0.</p>
<h4 id="usage_27">Usage</h4>
<pre><code>_ : pulse_countup_loop(n,trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the highest number of the countup (included) before reset to 0.</li>
<li><code>trig</code>: the trigger signal (1: start at next pulse; 0: reset to 0)</li>
</ul>
<hr />
<h3 id="baresetctr"><code>(ba.)resetCtr</code></h3>
<p>Function that lets through the mth impulse out of
each consecutive group of <code>n</code> impulses.</p>
<h4 id="usage_28">Usage</h4>
<pre><code>_ : resetCtr(n,m) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the total number of impulses being split</li>
<li><code>m</code>: index of impulse to allow to be output</li>
</ul>
<hr />
<h3 id="bapulse_countdown_loop"><code>(ba.)pulse_countdown_loop</code></h3>
<p>Starts counting down pulses from 0 to n included. While trig is 1 the output
is counting down, while trig is 0 the counter is reset to 0. At the end
of the countdown (n) the output value will be reset to 0.</p>
<h4 id="usage_29">Usage</h4>
<pre><code>_ : pulse_countdown_loop(n,trig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the highest number of the countup (included) before reset to 0.</li>
<li><code>trig</code>: the trigger signal (1: start at next pulse; 0: reset to 0)</li>
</ul>
<h2 id="array-processingpattern-matching">Array Processing/Pattern Matching</h2>
<hr />
<h3 id="bacount"><code>(ba.)count</code></h3>
<p>Count the number of elements of list l.
<code>count</code> is a standard Faust function.</p>
<h4 id="usage_30">Usage</h4>
<pre><code>count(l)
count((10,20,30,40)) -&gt; 4
</code></pre>

<p>Where:</p>
<ul>
<li><code>l</code>: list of elements</li>
</ul>
<hr />
<h3 id="batake"><code>(ba.)take</code></h3>
<p>Take an element from a list.
<code>take</code> is a standard Faust function.</p>
<h4 id="usage_31">Usage</h4>
<pre><code>take(P,l)
take(3,(10,20,30,40)) -&gt; 30
</code></pre>

<p>Where:</p>
<ul>
<li><code>P</code>: position (int, known at compile time, P &gt; 0)</li>
<li><code>l</code>: list of elements</li>
</ul>
<hr />
<h3 id="basubseq"><code>(ba.)subseq</code></h3>
<p>Extract a part of a list.</p>
<h4 id="usage_32">Usage</h4>
<pre><code>subseq(l, p, n)
subseq((10,20,30,40,50,60), 1, 3) -&gt; (20,30,40)
subseq((10,20,30,40,50,60), 4, 1) -&gt; 50
</code></pre>

<p>Where:</p>
<ul>
<li><code>l</code>: list</li>
<li><code>p</code>: start point (0: begin of list)</li>
<li><code>n</code>: number of elements</li>
</ul>
<h4 id="note">Note:</h4>
<p>Faust doesn't have proper lists. Lists are simulated with parallel
compositions and there is no empty list.</p>
<h2 id="selectors-conditions">Selectors (Conditions)</h2>
<hr />
<h3 id="baif"><code>(ba.)if</code></h3>
<p>if-then-else implemented with a select2. WARNING: since select2 is strict (always evaluating both branches),
the resulting if does not have the usual "lazy" semantic of the C if form, and thus cannot be used to 
protect against forbidden computations like division-by-zero for instance.</p>
<h4 id="usage_33">Usage</h4>
<ul>
<li><code>if(cond, then, else) : _</code></li>
</ul>
<p>Where:</p>
<ul>
<li><code>cond</code>: condition</li>
<li><code>cond</code>: signal selected while cond is true</li>
<li><code>else</code>: signal selected while cond is false</li>
</ul>
<hr />
<h3 id="baselector"><code>(ba.)selector</code></h3>
<p>Selects the ith input among n at compile time.</p>
<h4 id="usage_34">Usage</h4>
<pre><code>selector(I,N)
_,_,_,_ : selector(2,4) : _ // selects the 3rd input among 4
</code></pre>

<p>Where:</p>
<ul>
<li><code>I</code>: input to select (int, numbered from 0, known at compile time)</li>
<li><code>N</code>: number of inputs (int, known at compile time, N &gt; I)</li>
</ul>
<p>There is also cselector for selecting among complex input signals of the form (real,imag).</p>
<hr />
<h3 id="baselect2stereo"><code>(ba.)select2stereo</code></h3>
<p>Select between 2 stereo signals.</p>
<h4 id="usage_35">Usage</h4>
<pre><code>_,_,_,_ : select2stereo(bpc) : _,_    
</code></pre>

<p>Where:</p>
<ul>
<li><code>bpc</code>: the selector switch (0/1)</li>
</ul>
<hr />
<h3 id="baselectn"><code>(ba.)selectn</code></h3>
<p>Selects the ith input among N at run time.</p>
<h4 id="usage_36">Usage</h4>
<pre><code>selectn(N,i)
_,_,_,_ : selectn(4,2) : _ // selects the 3rd input among 4
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: number of inputs (int, known at compile time, N &gt; 0)</li>
<li><code>i</code>: input to select (int, numbered from 0)</li>
</ul>
<h4 id="example-test-program">Example test program</h4>
<pre><code>N = 64;
process = par(n, N, (par(i,N,i) : selectn(N,n)));
</code></pre>

<hr />
<h3 id="baselectmulti"><code>(ba.)selectmulti</code></h3>
<p>Selects the ith circuit among N at run time (all should have the same number of inputs and outputs)
with a crossfade.</p>
<h4 id="usage_37">Usage</h4>
<pre><code>selectmulti(n,lgen,id)
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: crossfade in samples</li>
<li><code>lgen</code>: list of circuits</li>
<li><code>id</code>: circuit to select (int, numbered from 0)</li>
</ul>
<h4 id="example-test-program_1">Example test program</h4>
<pre><code>process = selectmulti(ma.SR/10, ((3,9),(2,8),(5,7)), nentry(&quot;choice&quot;, 0, 0, 2, 1));
process = selectmulti(ma.SR/10, ((_*3,_*9),(_*2,_*8),(_*5,_*7)), nentry(&quot;choice&quot;, 0, 0, 2, 1));
</code></pre>

<h2 id="other">Other</h2>
<hr />
<h3 id="balatch"><code>(ba.)latch</code></h3>
<p>Latch input on positive-going transition of "clock" ("sample-and-hold").</p>
<h4 id="usage_38">Usage</h4>
<pre><code>_ : latch(clocksig) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>clocksig</code>: hold trigger (0 for hold, 1 for bypass)</li>
</ul>
<hr />
<h3 id="basandh"><code>(ba.)sAndH</code></h3>
<p>Sample And Hold.
<code>sAndH</code> is a standard Faust function.</p>
<h4 id="usage_39">Usage</h4>
<pre><code>_ : sAndH(t) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>t</code>: hold trigger (0 for hold, 1 for bypass)</li>
</ul>
<hr />
<h3 id="badownsample"><code>(ba.)downSample</code></h3>
<p>Down sample a signal. WARNING: this function doesn't change the
rate of a signal, it just holds samples...
<code>downSample</code> is a standard Faust function.</p>
<h4 id="usage_40">Usage</h4>
<pre><code>_ : downSample(freq) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>freq</code>: new rate in Hz</li>
</ul>
<hr />
<h3 id="bapeakhold"><code>(ba.)peakhold</code></h3>
<p>Outputs current max value above zero.</p>
<h4 id="usage_41">Usage</h4>
<pre><code>_ : peakhold(mode) : _;
</code></pre>

<p>Where:</p>
<p><code>mode</code> means: 
 1 - Track and hold max value.</p>
<hr />
<h3 id="bapeakholder"><code>(ba.)peakholder</code></h3>
<p>Tracks abs peak and holds peak for 'n' samples.</p>
<h4 id="usage_42">Usage</h4>
<pre><code>_ : peakholder(n) : _;
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: number of samples</li>
</ul>
<hr />
<h3 id="baimpulsify"><code>(ba.)impulsify</code></h3>
<p>Turns a signal into an impulse with the value of the current sample 
(0.3,0.2,0.1 becomes 0.3,0.0,0.0). This function is typically used with a 
<code>button</code> to turn its output into an impulse. <code>impulsify</code> is a standard Faust 
function.</p>
<h4 id="usage_43">Usage</h4>
<pre><code>button(&quot;gate&quot;) : impulsify;
</code></pre>

<hr />
<h3 id="baautomat"><code>(ba.)automat</code></h3>
<p>Record and replay to the values the input signal in a loop.</p>
<h4 id="usage_44">Usage</h4>
<pre><code>hslider(...) : automat(bps, size, init) : _
</code></pre>

<hr />
<h3 id="babpf"><code>(ba.)bpf</code></h3>
<p>bpf is an environment (a group of related definitions) that can be used to
create break-point functions. It contains three functions:</p>
<ul>
<li><code>start(x,y)</code> to start a break-point function</li>
<li><code>end(x,y)</code> to end a break-point function</li>
<li><code>point(x,y)</code> to add intermediate points to a break-point function</li>
</ul>
<p>A minimal break-point function must contain at least a start and an end point:</p>
<pre><code>f = bpf.start(x0,y0) : bpf.end(x1,y1);
</code></pre>

<p>A more involved break-point function can contains any number of intermediate
points:</p>
<pre><code>f = bpf.start(x0,y0) : bpf.point(x1,y1) : bpf.point(x2,y2) : bpf.end(x3,y3);
</code></pre>

<p>In any case the <code>x_{i}</code> must be in increasing order (for all <code>i</code>, <code>x_{i} &lt; x_{i+1}</code>).
For example the following definition :</p>
<pre><code>f = bpf.start(x0,y0) : ... : bpf.point(xi,yi) : ... : bpf.end(xn,yn);
</code></pre>

<p>implements a break-point function f such that:</p>
<ul>
<li><code>f(x) = y_{0}</code> when <code>x &lt; x_{0}</code></li>
<li><code>f(x) = y_{n}</code> when <code>x &gt; x_{n}</code></li>
<li><code>f(x) = y_{i} + (y_{i+1}-y_{i})*(x-x_{i})/(x_{i+1}-x_{i})</code> when <code>x_{i} &lt;= x</code>
and <code>x &lt; x_{i+1}</code></li>
</ul>
<p><code>bpf</code> is a standard Faust function.</p>
<hr />
<h3 id="balistinterp"><code>(ba.)listInterp</code></h3>
<p>Linearly interpolates between the elements of a list.</p>
<h4 id="usage_45">Usage</h4>
<pre><code>index = 1.69; // range is 0-4
process = listInterp((800,400,350,450,325),index);
</code></pre>

<p>Where:</p>
<ul>
<li><code>index</code>: the index (float) to interpolate between the different values.
The range of <code>index</code> depends on the size of the list.</li>
</ul>
<hr />
<h3 id="babypass1"><code>(ba.)bypass1</code></h3>
<p>Takes a mono input signal, route it to <code>e</code> and bypass it if <code>bpc = 1</code>. 
When bypassed, <code>e</code> is feed with zeros so that its state is cleanup up.
<code>bypass1</code> is a standard Faust function.</p>
<h4 id="usage_46">Usage</h4>
<pre><code>_ : bypass1(bpc,e) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>bpc</code>: bypass switch (0/1)</li>
<li><code>e</code>: a mono effect</li>
</ul>
<hr />
<h3 id="babypass2"><code>(ba.)bypass2</code></h3>
<p>Takes a stereo input signal, route it to <code>e</code> and bypass it if <code>bpc = 1</code>. 
When bypassed, <code>e</code> is feed with zeros so that its state is cleanup up.
<code>bypass2</code> is a standard Faust function.</p>
<h4 id="usage_47">Usage</h4>
<pre><code>_,_ : bypass2(bpc,e) : _,_
</code></pre>

<p>Where:</p>
<ul>
<li><code>bpc</code>: bypass switch (0/1)</li>
<li><code>e</code>: a stereo effect</li>
</ul>
<hr />
<h3 id="babypass1to2"><code>(ba.)bypass1to2</code></h3>
<p>Bypass switch for effect <code>e</code> having mono input signal and stereo output. 
Effect <code>e</code> is bypassed if <code>bpc = 1</code>.When bypassed, <code>e</code> is feed with zeros 
so that its state is cleanup up.
<code>bypass1to2</code> is a standard Faust function.</p>
<h4 id="usage_48">Usage</h4>
<pre><code>_ : bypass1to2(bpc,e) : _,_
</code></pre>

<p>Where:</p>
<ul>
<li><code>bpc</code>: bypass switch (0/1)</li>
<li><code>e</code>: a mono-to-stereo effect</li>
</ul>
<hr />
<h3 id="babypass_fade"><code>(ba.)bypass_fade</code></h3>
<p>Bypass an arbitrary (N x N) circuit with 'n' samples crossfade. 
Inputs and outputs signals are faded out when 'e' is bypassed, 
so that 'e' state is cleanup up. 
Once bypassed the effect is replaced by par(i,N,_). 
Bypassed circuits can be chained.</p>
<h4 id="usage_49">Usage</h4>
<pre><code>_ : bypass_fade(n,b,e) : _
or
_,_ : bypass_fade(n,b,e) : _,_ 
</code></pre>

<ul>
<li><code>n</code>: number of samples for the crossfade</li>
<li><code>b</code>: bypass switch (0/1)</li>
<li><code>e</code>: N x N circuit</li>
</ul>
<h4 id="examples">Examples</h4>
<pre><code>process = bypass_fade(ma.SR/10, checkbox(&quot;bypass echo&quot;), echo);
process = bypass_fade(ma.SR/10, checkbox(&quot;bypass reverb&quot;), freeverb);
</code></pre>

<hr />
<h3 id="batoggle"><code>(ba.)toggle</code></h3>
<p>Triggered by the change of 0 to 1, it toggles the output value
between 0 and 1.</p>
<h4 id="usage_50">Usage</h4>
<pre><code>_ : toggle : _
</code></pre>

<h4 id="examples_1">Examples</h4>
<pre><code>button(&quot;toggle&quot;) : toggle : vbargraph(&quot;output&quot;, 0, 1)
(an.amp_follower(0.1) &gt; 0.01) : toggle : vbargraph(&quot;output&quot;, 0, 1) // takes audio input
</code></pre>

<hr />
<h3 id="baon_and_off"><code>(ba.)on_and_off</code></h3>
<p>The first channel set the output to 1, the second channel to 0.</p>
<h4 id="usage_51">Usage</h4>
<pre><code>_ , _ : on_and_off : _
</code></pre>

<h4 id="example">Example</h4>
<pre><code>button(&quot;on&quot;), button(&quot;off&quot;) : on_and_off : vbargraph(&quot;output&quot;, 0, 1)
</code></pre>

<hr />
<h3 id="baselectoutn"><code>(ba.)selectoutn</code></h3>
<p>Route input to the output among N at run time.</p>
<h4 id="usage_52">Usage</h4>
<pre><code>_ : selectoutn(N, i) : _,_,...N
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: number of outputs (int, known at compile time, N &gt; 0)</li>
<li><code>i</code>: output number to route to (int, numbered from 0) (i.e. slider)</li>
</ul>
<h4 id="example_1">Example</h4>
<pre><code>process = 1 : selectoutn(3, sel) : par(i, 3, vbargraph(&quot;v.bargraph %i&quot;, 0, 1));
sel = hslider(&quot;volume&quot;, 0, 0, 2, 1) : int;
</code></pre>

<h2 id="sliding-reduce">Sliding Reduce</h2>
<p>Provides various operations on the last N samples using a high order
`slidingReduce(op,N,maxN,disabledVal,x)`` fold-like function:</p>
<ul>
<li><code>slidingSum(n)</code>: the sliding sum of the last n input samples, CPU-light</li>
<li><code>slidingSump(n,maxn)</code>: the sliding sum of the last n input samples, numerically stable "forever"</li>
<li><code>slidingMax(n,maxn)</code>: the sliding max of the last n input samples</li>
<li><code>slidingMin(n,maxn)</code>: the sliding min of the last n input samples</li>
<li><code>slidingMean(n)</code>: the sliding mean of the last n input samples, CPU-light</li>
<li><code>slidingMeanp(n,maxn)</code>: the sliding mean of the last n input samples, numerically stable "forever"</li>
<li><code>slidingRMS(n)</code>: the sliding RMS of the last n input samples, CPU-light</li>
<li><code>slidingRMSp(n,maxn)</code>: the sliding RMS of the last n input samples, numerically stable "forever"</li>
</ul>
<h4 id="working-principle">Working Principle</h4>
<p>If we want the maximum of the last 8 values, we can do that as:</p>
<pre><code>simpleMax(x) =
 (
   (
     max(x@0,x@1),
     max(x@2,x@3)
   ) :max
 ),
 (
   (
     max(x@4,x@5),
     max(x@6,x@7)
   ) :max
 )
 :max;
</code></pre>

<p><code>max(x@2,x@3)</code> is the same as <code>max(x@0,x@1)@2</code> but the latter re-uses a
value we already computed,so is more efficient. Using the same trick for
values 4 trough 7, we can write:</p>
<pre><code>efficientMax(x)=
 (
   (
     max(x@0,x@1),
     max(x@0,x@1)@2
   ) :max
 ),
 (
   (
     max(x@0,x@1),
     max(x@0,x@1)@2
   ) :max@4
 )
 :max;
</code></pre>

<p>We can rewrite it recursively, so it becomes possible to get the maximum at
have any number of values, as long as it's a power of 2.</p>
<pre><code>recursiveMax =
 case {
   (1,x) =&gt; x;
   (N,x) =&gt; max(recursiveMax(N/2,x), recursiveMax(N/2,x)@(N/2));
 };
</code></pre>

<p>What if we want to look at a number of values that's not a power of 2?
For each value, we will have to decide whether to use it or not.
If N is bigger than the index of the value, we use it, otherwise we replace
it with (<code>0-(ma.INFINITY)</code>):</p>
<pre><code>variableMax(N,x) =
 max(
   max(
     (
       (x@0 : useVal(0)),
       (x@1 : useVal(1))
     ):max,
     (
       (x@2 : useVal(2)),
       (x@3 : useVal(3))
     ):max
   ),
   max(
     (
       (x@4 : useVal(4)),
       (x@5 : useVal(5))
     ):max,
     (
       (x@6 : useVal(6)),
       (x@7 : useVal(7))
     ):max
   )
 )
with {
 useVal(i) = select2((N&gt;=i) , (0-(ma.INFINITY)),_);
};
</code></pre>

<p>Now it becomes impossible to re-use any values. To fix that let's first look
at how we'd implement it using recursiveMax, but with a fixed N that is not
a power of 2. For example, this is how you'd do it with <code>N=3</code>:</p>
<pre><code>binaryMaxThree(x) =
 (
   recursiveMax(1,x)@0, // the first x
   recursiveMax(2,x)@1  // the second and third x
 ):max;
</code></pre>

<p><code>N=6</code></p>
<pre><code>binaryMaxSix(x) =
 (
   recursiveMax(2,x)@0, // first two
   recursiveMax(4,x)@2  // third trough sixth
 ):max;
</code></pre>

<p>Note that <code>recursiveMax(2,x)</code> is used at a different delay then in
<code>binaryMaxThree</code>, since it represents 1 and 2, not 2 and 3. Each block is
delayed the combined size of the previous blocks.</p>
<p><code>N=7</code></p>
<pre><code>binaryMaxSeven(x) =
 (
   (
     recursiveMax(1,x)@0, // first x
     recursiveMax(2,x)@1  // second and third
   ):max,
   (
     recursiveMax(4,x)@3  // fourth trough seventh
   )
 ):max;
</code></pre>

<p>To make a variable version, we need to know which powers of two are used,
and at which delay time.</p>
<p>Then it becomes a matter of:</p>
<ul>
<li>lining up all the different block sizes in parallel: the first <code>par()</code>
 statement</li>
<li>delaying each the appropriate amount: <code>sumOfPrevBlockSizes()</code></li>
<li>turning it on or off: <code>useVal()</code></li>
<li>getting the maximum of all of them: <code>combine()</code></li>
</ul>
<p>In Faust, we can only do that for a fixed maximum number of values: <code>maxN</code></p>
<pre><code>variableBinaryMaxN(N,maxN,x) =
 par(i,maxNrBits,recursiveMax(pow2(i),x)@sumOfPrevBlockSizes(N,maxN,i) : useVal(i)) : combine(maxNrBits) with {
   // The sum of all the sizes of the previous blocks
   sumOfPrevBlockSizes(N,maxN,0) = 0;
   sumOfPrevBlockSizes(N,maxN,i) = (subseq((allBlockSizes(N,maxN)),0,i):&gt;_);
   allBlockSizes(N,maxN) = par(i, maxNrBits, pow2(i) * isUsed(i) );
   maxNrBits = int2nrOfBits(maxN);
   // get the maximum of all blocks
   combine(2) = max;
   combine(N) = max(combine(N-1),_);
   // Decide wether or not to use a certain value, based on N
   useVal(i) = select2(isUsed(i), (0-(ma.INFINITY)),_);
   isUsed(i) = take(i+1, (int2bin(N,maxN)));
 };
</code></pre>

<hr />
<h3 id="baslidingreduce"><code>(ba.)slidingReduce</code></h3>
<p>Fold-like high order function. Apply a commutative binary operation <code>&lt;op&gt;</code> to
the last <code>&lt;n&gt;</code> consecutive samples of a signal <code>&lt;x&gt;</code>. For example :
<code>slidingReduce(max,128,128,-(ma.INFINITY))</code> will compute the maximum of the last
128 samples. The output is updated each sample, unlike reduce, where the
output is constant for the duration of a block.</p>
<h4 id="usage_53">Usage</h4>
<pre><code>_ : slidingReduce(op,N,maxN,disabledVal) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
<li><code>op</code>: the operator. Needs to be a commutative one.</li>
<li><code>disabledVal</code>: the value to use when we want to ignore a value.</li>
</ul>
<p>In other words, <code>op(x,disabledVal)</code> should equal to <code>x</code>. For example,
<code>+(x,0)</code> equals <code>x</code> and <code>min(x,ma.INFINITY)</code> equals <code>x</code>. So if we want to
calculate the sum, we need to give 0 as <code>disabledVal</code>, and if we want the
minimum, we need to give <code>ma.INFINITY</code> as <code>disabledVal</code>.</p>
<hr />
<h3 id="baslidingsum"><code>(ba.)slidingSum</code></h3>
<p>The sliding sum of the last n input samples.</p>
<p>It will eventually run into numerical trouble when there is a persistent dc component.
If that matters in your application, use the more CPU-intensive (ba.)slidingSump.</p>
<h4 id="usage_54">Usage</h4>
<pre><code>_ : slidingSum(N) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
</ul>
<hr />
<h3 id="baslidingsump"><code>(ba.)slidingSump</code></h3>
<p>The sliding sum of the last n input samples.</p>
<p>It uses a lot more CPU then (ba.)slidingSum(n,maxn), but is numerically stable "forever" in return.</p>
<h4 id="usage_55">Usage</h4>
<pre><code>_ : slidingSump(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
</ul>
<hr />
<h3 id="baslidingmax"><code>(ba.)slidingMax</code></h3>
<p>The sliding maximum of the last n input samples.</p>
<h4 id="usage_56">Usage</h4>
<pre><code>_ : slidingMax(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
</ul>
<hr />
<h3 id="baslidingmin"><code>(ba.)slidingMin</code></h3>
<p>The sliding minimum of the last n input samples.</p>
<h4 id="usage_57">Usage</h4>
<pre><code>_ : slidingMin(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
</ul>
<hr />
<h3 id="baslidingmean"><code>(ba.)slidingMean</code></h3>
<p>The sliding mean of the last n input samples.</p>
<p>It will eventually run into numerical trouble when there is a persistent dc component.
If that matters in your application, use the more CPU-intensive (ba.)slidinRMSp.</p>
<h4 id="usage_58">Usage</h4>
<pre><code>_ : slidingMean(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
</ul>
<hr />
<h3 id="baslidingmeanp"><code>(ba.)slidingMeanp</code></h3>
<p>The sliding mean of the last n input samples.</p>
<p>It uses a lot more CPU then (ba.)slidingMean(n,maxn), but is numerically stable "forever" in return.</p>
<h4 id="usage_59">Usage</h4>
<pre><code>_ : slidingMeanp(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
</ul>
<hr />
<h3 id="baslidingrms"><code>(ba.)slidingRMS</code></h3>
<p>The root mean square of the last n input samples.</p>
<p>It will eventually run into numerical trouble when there is a persistent dc component.
If that matters in your application, use the more CPU-intensive (ba.)slidinRMSp.</p>
<h4 id="usage_60">Usage</h4>
<pre><code>_ : slidingRMS(N) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
</ul>
<hr />
<h3 id="baslidingrmsp"><code>(ba.)slidingRMSp</code></h3>
<p>The root mean square of the last n input samples.</p>
<p>It uses a lot more CPU then (ba.)slidingRMS(n,maxn), but is numerically stable "forever" in return.</p>
<h4 id="usage_61">Usage</h4>
<pre><code>_ : slidingRMSp(N,maxN) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>N</code>: the number of values to process</li>
<li><code>maxN</code>: the maximum number of values to process, needs to be a power of 2</li>
</ul>
<h2 id="parallel-operator">Parallel Operator</h2>
<p>Provides various operations on N parallel inputs using a high order
`parallelOp(op,N,x)`` function:</p>
<ul>
<li><code>parallelMax(n)</code>: the max of n parallel inputs</li>
<li><code>parallelMin(n)</code>: the min of n parallel inputs</li>
<li><code>parallelMean(n)</code>: the mean of n parallel inputs</li>
<li><code>parallelRMS(n)</code>: the RMS of n parallel inputs</li>
</ul>
<hr />
<h3 id="baparallelop"><code>(ba.)parallelOp</code></h3>
<p>Apply a commutative binary operation <code>&lt;op&gt;</code> to n parallel inputs.</p>
<h4 id="usage_62">usage</h4>
<pre><code>si.bus(n) : parallelOp(op,n) : _
</code></pre>

<p>where:</p>
<ul>
<li><code>n</code>: the number of parallel inputs</li>
<li><code>op</code>: the operator. needs to be a commutative one.</li>
</ul>
<hr />
<h3 id="baparallelmax"><code>(ba.)parallelMax</code></h3>
<p>The maximum of n parallel inputs</p>
<h4 id="usage_63">Usage</h4>
<pre><code>si.bus(n) : parallelMax(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the number of parallel inputs</li>
</ul>
<hr />
<h3 id="baparallelmin"><code>(ba.)parallelMin</code></h3>
<p>The minimum of n parallel inputs</p>
<h4 id="usage_64">Usage</h4>
<pre><code>si.bus(n) : parallelMin(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the number of parallel inputs</li>
</ul>
<hr />
<h3 id="baparallelmean"><code>(ba.)parallelMean</code></h3>
<p>The mean of n parallel inputs</p>
<h4 id="usage_65">Usage</h4>
<pre><code>si.bus(n) : parallelMean(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the number of parallel inputs</li>
</ul>
<hr />
<h3 id="baparallelrms"><code>(ba.)parallelRMS</code></h3>
<p>The RMS of n parallel inputs</p>
<h4 id="usage_66">Usage</h4>
<pre><code>si.bus(n) : parallelRMS(n) : _
</code></pre>

<p>Where:</p>
<ul>
<li><code>n</code>: the number of parallel inputs</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2019-2020 <a href="https://www.grame.fr">Grame-CNCM</a></p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
