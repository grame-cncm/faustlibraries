<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title> linearalgebra  - Faust Libraries</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-3.6.0.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../.."><img src="../../img/faustText.svg" width="150px"> </a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../organization/" class="dropdown-item"> Organization </a>
</li>
                                    
<li>
    <a href="../../standardFunctions/" class="dropdown-item"> Standard Functions </a>
</li>
                                    
<li>
    <a href="../../contributing/" class="dropdown-item"> Contributing </a>
</li>
                                    
<li>
    <a href="../../community/" class="dropdown-item"> Community </a>
</li>
                                    
<li>
    <a href="../../about/" class="dropdown-item"> Copyright/License </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../" class="nav-link">Index</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../aanl/" class="dropdown-item"> antialiased </a>
</li>
                                    
<li>
    <a href="../analyzers/" class="dropdown-item"> analyzers </a>
</li>
                                    
<li>
    <a href="../basics/" class="dropdown-item"> basics </a>
</li>
                                    
<li>
    <a href="../compressors/" class="dropdown-item"> compressors </a>
</li>
                                    
<li>
    <a href="../debug/" class="dropdown-item"> debug </a>
</li>
                                    
<li>
    <a href="../delays/" class="dropdown-item"> delays </a>
</li>
                                    
<li>
    <a href="../demos/" class="dropdown-item"> demos </a>
</li>
                                    
<li>
    <a href="../dx7/dx7/" class="dropdown-item"> dx7/dx7 </a>
</li>
                                    
<li>
    <a href="../dx7/env/" class="dropdown-item"> dx7/env </a>
</li>
                                    
<li>
    <a href="../dx7/lfo/" class="dropdown-item"> dx7/lfo </a>
</li>
                                    
<li>
    <a href="../dx7/operator/" class="dropdown-item"> dx7/operator </a>
</li>
                                    
<li>
    <a href="../dx7/pitchenv/" class="dropdown-item"> dx7/pitchenv </a>
</li>
                                    
<li>
    <a href="../envelopes/" class="dropdown-item"> envelopes </a>
</li>
                                    
<li>
    <a href="../fds/" class="dropdown-item"> fds </a>
</li>
                                    
<li>
    <a href="../filters/" class="dropdown-item"> filters </a>
</li>
                                    
<li>
    <a href="../hoa/" class="dropdown-item"> hoa </a>
</li>
                                    
<li>
    <a href="../hysteresis/" class="dropdown-item"> hysteresis </a>
</li>
                                    
<li>
    <a href="../interpolators/" class="dropdown-item"> interpolators </a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active"> linearalgebra </a>
</li>
                                    
<li>
    <a href="../maths/" class="dropdown-item"> maths </a>
</li>
                                    
<li>
    <a href="../mi/" class="dropdown-item"> mi </a>
</li>
                                    
<li>
    <a href="../misceffects/" class="dropdown-item"> misceffects </a>
</li>
                                    
<li>
    <a href="../motion/" class="dropdown-item"> motion </a>
</li>
                                    
<li>
    <a href="../noises/" class="dropdown-item"> noises </a>
</li>
                                    
<li>
    <a href="../oscillators/" class="dropdown-item"> oscillators </a>
</li>
                                    
<li>
    <a href="../phaflangers/" class="dropdown-item"> phaflangers </a>
</li>
                                    
<li>
    <a href="../physmodels/" class="dropdown-item"> physmodels </a>
</li>
                                    
<li>
    <a href="../quantizers/" class="dropdown-item"> quantizers </a>
</li>
                                    
<li>
    <a href="../reducemaps/" class="dropdown-item"> reducemaps </a>
</li>
                                    
<li>
    <a href="../reverbs/" class="dropdown-item"> reverbs </a>
</li>
                                    
<li>
    <a href="../routes/" class="dropdown-item"> routes </a>
</li>
                                    
<li>
    <a href="../signals/" class="dropdown-item"> signals </a>
</li>
                                    
<li>
    <a href="../soundfiles/" class="dropdown-item"> soundfiles </a>
</li>
                                    
<li>
    <a href="../spats/" class="dropdown-item"> spats </a>
</li>
                                    
<li>
    <a href="../synths/" class="dropdown-item"> synths </a>
</li>
                                    
<li>
    <a href="../vaeffects/" class="dropdown-item"> vaeffects </a>
</li>
                                    
<li>
    <a href="../version/" class="dropdown-item"> version </a>
</li>
                                    
<li>
    <a href="../wdmodels/" class="dropdown-item"> wdmodels </a>
</li>
                                    
<li>
    <a href="../webaudio/" class="dropdown-item"> webaudio </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        

        <div class="container">
            <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#linearalgebralib" class="nav-link">linearalgebra.lib</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#ladeterminant" class="nav-link">(la.)determinant</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#laminor" class="nav-link">(la.)minor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#lainverse" class="nav-link">(la.)inverse</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#latranspose2" class="nav-link">(la.)transpose2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#lamatmul" class="nav-link">(la.)matMul</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#laidentity" class="nav-link">(la.)identity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#ladiag" class="nav-link">(la.)diag</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9 main-container" role="main">

<h1 id="linearalgebralib">linearalgebra.lib</h1>
<p>Linear Algebra library. Its official prefix is <code>la</code>.</p>
<p>This library provides mathematical tools for matrix and vector operations
in Faust. It includes basic arithmetic, dot products, outer products, matrix inversion,
determinant computation, and utilities for linear transformations and numerical analysis.</p>
<p>This library adds some new linear algebra functions:</p>
<p><code>determinant</code></p>
<p><code>minor</code></p>
<p><code>inverse</code></p>
<p><code>transpose2</code></p>
<p><code>matMul</code> matrix multiplication</p>
<p><code>identity</code></p>
<p><code>diag</code></p>
<p>How does it work? An <code>NxM</code> matrix can be flattened into a bus <code>si.bus(N*M)</code>. These buses can be passed to functions as long as <code>N</code> and sometimes <code>M</code> (if the matrix need not be square) are passed too.</p>
<h4 id="some-things-to-think-about-going-forward">Some things to think about going forward</h4>
<h5 id="implications-for-ml-in-faust">Implications for ML in Faust</h5>
<p>Next step of making a "Dense"/"Linear" layer from machine learning.
Where in the libraries should <code>ReLU</code> go?
What about 3D tensors instead of 2D matrices? Image convolutions take place on 3D tensors shaped <code>HxWxC</code>.</p>
<h5 id="design-of-matmul">Design of matMul</h5>
<p>Currently the design is <code>matMul(J, K, L, M, leftHandMat, rightHandMat)</code> where <code>leftHandMat</code> is <code>JxK</code> and <code>rightHandMat</code> is <code>LxM</code>.</p>
<p>It would also be neat to have <code>matMul(J, K, rightHandMat, L, M, leftHandMat)</code>.</p>
<p>Then a "packed" matrix could be consistently stored as a combination of a 2-channel "header" <code>N, M</code> and the values <code>si.bus(N*M)</code>.</p>
<p>This would ultimately enable <code>result = packedLeftHand : matMul(packedRightHand);</code> for the equivalent numpy code: <code>result = packedLeftHand @ packedRightHand;</code>.</p>
<h4 id="references">References</h4>
<ul>
<li><a href="https://github.com/grame-cncm/faustlibraries/blob/master/linearalgebra.lib">https://github.com/grame-cncm/faustlibraries/blob/master/linearalgebra.lib</a></li>
</ul>
<hr />
<h3 id="ladeterminant"><code>(la.)determinant</code></h3>
<p>Calculates the determinant of a bus that represents
an <code>NxN</code> matrix.</p>
<h4 id="usage">Usage</h4>
<pre><code>si.bus(N*N) : determinant(N) : _
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: the size of each axis of the matrix.</li>
</ul>
<h4 id="test">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
determinant_test = (1, 2, 3, 4) : la.determinant(2);
</code></pre>
<hr />
<h3 id="laminor"><code>(la.)minor</code></h3>
<p>An utility for finding the matrix minor when inverting a matrix.
It returns the determinant of the submatrix formed by deleting the row at
index <code>ROW</code> and column at index <code>COL</code>.
The following implementation doesn't work but looks simple.</p>
<pre><code>minor(N, ROW, COL) = par(r, N, par(c, N, select2((ROW==r)||(COL==c),_,!))) : determinant(N-1);
</code></pre>
<h4 id="usage_1">Usage</h4>
<pre><code>si.bus(N*N) : minor(N, ROW, COL) : _
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: the size of each axis of the matrix.</li>
<li><code>ROW</code>: the selected position on 0th dimension of the matrix (<code>0 &lt;= ROW &lt; N</code>)</li>
<li><code>COL</code>: the selected position on the 1st dimension of the matrix (<code>0 &lt;= COL &lt; N</code>)</li>
</ul>
<h4 id="test_1">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
minor_test = (1, 2, 3, 0, 4, 5, 7, 8, 9) : la.minor(3, 1, 1);
</code></pre>
<h4 id="references_1">References</h4>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Minor_(linear_algebra)#First_minor">https://en.wikipedia.org/wiki/Minor_(linear_algebra)#First_minor</a></li>
</ul>
<hr />
<h3 id="lainverse"><code>(la.)inverse</code></h3>
<p>Inverts a matrix. The incoming bus represents an <code>NxN</code> matrix.
Note, this is an unsafe operation since not all matrices are invertible.</p>
<h4 id="usage_2">Usage</h4>
<pre><code>si.bus(N*N) : inverse(N) : si.bus(N*N)
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: the size of each axis of the matrix.</li>
</ul>
<h4 id="test_2">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
inverse_test = (4, 7, 2, 6) : la.inverse(2);
</code></pre>
<hr />
<h3 id="latranspose2"><code>(la.)transpose2</code></h3>
<p>Transposes an <code>NxM</code> matrix stored in row-major order, resulting
in an <code>MxN</code> matrix stored in row-major order.</p>
<h4 id="usage_3">Usage</h4>
<pre><code>si.bus(N*M) : transpose2(N, M) : si.bus(M*N)
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: the number of rows in the input matrix</li>
<li><code>M</code>: the number of columns in the input matrix</li>
</ul>
<h4 id="test_3">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
transpose2_test = (1, 2, 3, 4, 5, 6) : la.transpose2(2, 3);
</code></pre>
<hr />
<h3 id="lamatmul"><code>(la.)matMul</code></h3>
<p>Multiply a <code>JxK</code> matrix (mat1) and an <code>LxM</code> matrix (mat2) to produce a <code>JxM</code> matrix.
Note that <code>K==L</code>.
Both matrices should use row-major order.
In terms of numpy, this function is <code>mat1 @ mat2</code>.</p>
<h4 id="usage_4">Usage</h4>
<pre><code>matMul(J, K, L, M, si.bus(J*K), si.bus(L*M)) : si.bus(J*M)
</code></pre>
<p>Where:</p>
<ul>
<li><code>J</code>: the number of rows in <code>mat1</code></li>
<li><code>K</code>: the number of columns in <code>mat1</code></li>
<li><code>L</code>: the number of rows in <code>mat2</code></li>
<li><code>M</code>: the number of columns in <code>mat2</code></li>
</ul>
<h4 id="test_4">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
matMul_test = (1, 2, 3, 4), (5, 6, 7, 8) : la.matMul(2, 2, 2, 2);
</code></pre>
<hr />
<h3 id="laidentity"><code>(la.)identity</code></h3>
<p>Creates an <code>NxN</code> identity matrix.</p>
<h4 id="usage_5">Usage</h4>
<pre><code>identity(N) : si.bus(N*N)
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: The size of each axis of the identity matrix.</li>
</ul>
<h4 id="test_5">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
identity_test = la.identity(3);
</code></pre>
<hr />
<h3 id="ladiag"><code>(la.)diag</code></h3>
<p>Creates a diagonal matrix of size <code>NxN</code> with specified
values along the diagonal.</p>
<h4 id="usage_6">Usage</h4>
<pre><code>si.bus(N) : diag(N) : si.bus(N*N)
</code></pre>
<p>Where:</p>
<ul>
<li><code>N</code>: The size of each axis of the matrix.</li>
</ul>
<h4 id="test_6">Test</h4>
<pre><code>la = library(&quot;linearalgebra.lib&quot;);
diag_test = (1, 2, 3) : la.diag(3);
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2019-2025 <a href="https://www.grame.fr">Grame-CNCM</a></p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
